<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>cgSceneGraph</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="title" content="HTML5 canvas framework"/>
    <meta name="description" content="html5 canvas framework"/>
    <meta name="keywords" content="html5 canvas cgscenegraph cgSceneGraph framework html 5"/>
    <meta name="language" content="en"/>
    <meta name="subject" content="html 5 canvas framework"/>
    <meta name="robots" content="All"/>
    <meta name="copyright" content="Capgemini industries et Distribution"/>
    <meta name="abstract" content=" html 5 canvas framework"/>
    <meta name="MSSmartTagsPreventParsing" content="true"/>

    <link rel="fluid-icon" href="http://gwennaelbuchet.github.com/cgSceneGraph/fluidicon.png" title="cgSceneGraph"/>
    <link rel="apple-touch-icon-precomposed" sizes="57x57" href="../apple-touch-icon-114.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../apple-touch-icon-114.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../apple-touch-icon-144.png"/>
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../apple-touch-icon-144.png"/>

    <link rel="icon" type="image/png" href="../favicon.png"/>

    <link href='http://fonts.googleapis.com/css?family=Signika' rel='stylesheet' type='text/css'>
    <link id="theme" rel="stylesheet" type="text/css" href="../css/style.css" title="theme"/>

    <link href="../css/shCore.css" rel="stylesheet" type="text/css"/>
    <link href="../css/shThemeDefault.css" rel="stylesheet" type="text/css"/>
    <script src="../js/shCore.js" type="text/javascript"></script>
    <script src="../js/shBrushJScript.js" type="text/javascript"></script>

    <script src="../js/cufon-yui.js" type="text/javascript"></script>
    <script src="../js/Aller.font.js" type="text/javascript"></script>
    <script type="text/javascript">
        Cufon.replace('ul.oe_menu div a', {hover:true});
        Cufon.replace('h1,h2,.oe_heading');
    </script>

</head>
<body>
<!-- top wrapper -->
<div id="topWrapper">
    <div id="topBanner">
      <span class="downloadLink">
            <a href="https://github.com/GwennaelBuchet/cgSceneGraph/zipball/master"
               title="Download latest version as a Zip file">
                <img src="../img/dlzip.png" width="60"/>
            </a>
            <a href="https://github.com/GwennaelBuchet/cgSceneGraph/tarball/master"
               title="Download latest version as a tar.gz file">
                <img src="../img/dltar.png" width="60"/>
            </a>
             <a href="https://github.com/GwennaelBuchet/cgSceneGraph"
                title="Fork me on GitHub"
                target="_blank"><img src="../img/blacktocat.png" width="50"/></a>
        </span>
    </div>
    <!-- end topBanner -->
</div>
<!-- end top wrapper -->

<div id="topnav">
    <div class="oe_wrapper">
        <!--div id="oe_overlay" class="oe_overlay"></div-->
        <ul id="oe_menu" class="oe_menu">
            <li>
                <a href="../index.html" shape="rect">HOME</a>
            </li>
            <li class="current" style="border:none"><a href="../tutorials.html">TUTORIALS</a>

                <div style="left:-112px;">
                    <ul>
                        <li class="oe_heading">Starter</li>
                        <li><a href="../tutorials.html">Global concepts</a></li>
                        <li><a href="simple_project.html">Create a simple project</a></li>
                        <li><a href="custom_node.html">Create your nodes</a></li>
                        <li><a href="srt_animations.html">SRT Animations</a></li>
                        <li><a href="multiselection.html">Multi-selection</a></li>
                        <li><a href="image_sharing.html">Sprite sheets / Image sharing</a></li>
                        <li><a href="spritesheets.html">SpriteSheets</a></li>
                        <li><a href="traverser.html">Traverse the graph</a></li>
                    </ul>
                    <ul>
                        <li class="oe_heading">Events</li>
                        <li><a href="node_events.html">Node events</a></li>
                        <li><a href="scene_events.html">Scene events</a></li>
                        <li><a href="animation_events.html">Animation events</a></li>
                    </ul>
                    <ul>
                        <li class="oe_heading"><br/>Advanced</li>
                        <li><a href="particles.html">Particles</a></li>
                        <li><a href="share_animation.html">Share animation values</a></li>
                        <li><a href="advanced_animation.html">Advanced animation</a></li>
                        <li><a href="making_game.html">Develop a game</a></li>
                    </ul>
                    <ul>
                        <li class="oe_heading">Tips & Tricks</li>
                        <li><a href="prerendering.html">Pre-rendering</a></li>
                        <li><a href="fullscreen.html">How-To: Fullscreen size</a></li>
                    </ul>
                </div>
            </li>
            <li>
                <a href="../examples.html" shape="rect">EXAMPLES</a>
            </li>
            <li>
                <a href="../ecosystem.html" shape="rect">ECOSYSTEM</a>
            </li>
            <li>
                <a href="../api.html" shape="rect">API DOCS</a>
            </li>
            <li>
                <a href="../changelog.html" shape="rect">CHANGE-LOG</a>
            </li>
            <li>
                <a href="../comments.html" shape="rect">FORUMS</a>
            </li>
            <li>
                <a href="../about.html" shape="rect">ABOUT</a>
            </li>
        </ul>
    </div>

</div>
<!-- end topnav -->


<div id="wrapper">
<div id="bg">
<div id="header"></div>
<div id="page">
<!-- begin container -->
<div id="container">
<!--  content -->
<div id="content">
<div id="center">

<h1>Create your nodes</h1>

<p>The power of the framework is in its design: <br/>
    <strong class="alert">cgSceneGraph does not render anything by itself, but provides a
        framework and a lot of features to help you rendering what you need !</strong>
    <br/>
    <br/>
    That's the big difference with other tools : you won't never be limited to what the
    framework provides !<br/>
    Of course, there are a lot of cool and useful <a href="../examples.html" target="_blank">already
        existing extensions</a>, and you can build
    complete games and applications just with them :
<ul>
    <li>image</li>
    <li>animated sprites</li>
    <li>button</li>
    <li>webview</li>
    <li>particle system</li>
    <li>text</li>
    <li>square</li>
    <li>tab menu</li>
    <li>color picker</li>
</ul>

<div class="whiteText aligncenter">How to create your own beautiful nodes ?<br/> By extending
    the "<span class="blueText">CGSGNode</span>" class !
</div>
</p>

<h2>What is the CGSGNode class ?</h2>

<p>The CGSGNode class is the base class for any displayed items on the screen. <br/>
    Everything in the graph is a CGSGNode or inherit from it (ie: is an extension):<br/>
    <img src="../img/concepts_graph.png" alt="graph of nodes" class="imgCenter"/>

<p>
    The CGSGNode class encapsulates a lot of properties and methods, including a "render"
    method. This one doesn't do anything, it has to be overrided by inherited classes.<br/>
    Here is a list of properties and methods that a custom node (also called "extension" or
    "plugin") will inherit:

<h3>Main properties of CGSGNode</h3>
The main (but not the only ones) properties are:
<ul>
    <li>isDraggable</li>
    <li>isResizable</li>
    <li>isVisible</li>
    <li>isTraversable</li>
    <li>globalAlpha</li>
    <li>name</li>
    <li>isSelected (read only)</li>
    <li>rotationCenter</li>
    <li>position (read only)</li>
    <li>dimension (read only)</li>
    <li>scale (read only)</li>
    <li>rotation (read only)</li>
    <li>onClick</li>
    <li>onDblClick</li>
    <li>onDrag</li>
    <li>onDragEnd</li>
    <li>onResize</li>
    <li>onResizeEnd</li>
    <li>onSelect</li>
    <li>onDeselect</li>
    <li>...</li>
</ul>

<h3>Main methods of CGSGNode</h3>
<ul>
    <li>render (context)</li>
    <li>setSelected (isSelected)</li>
    <li>pickNode (mousePosition, absoluteScale, ghostContext, recursively, condition)</li>
    <li>translateTo, translateWith, translateBy</li>
    <li>resizeTo, resizeWith, resizeBy</li>
    <li>scaleTo, scaleWith, scaleBy</li>
    <li>rotateTo, rotateWith, rotateBy</li>
    <li>addChild (newNode)</li>
    <li>name</li>
    <li>addChildAt (newNode, index)</li>
    <li>removeChild (node, searchRecursively)</li>
    <li>detachChildAt (index)</li>
    <li>detachChild (childNode)</li>
    <li>setRegionConstraint (region)</li>
    <li>getAbsolutePosition ()</li>
    <li>getAbsoluteScale ()</li>
    <li>getAbsoluteRotation ()li>
    <li>getAbsoluteLeft, getAbsoluteRight, getAbsoluteTop, getAbsoluteBottom, getAbsoluteWidth,
        getAbsoluteHeight
    </li>
    <li>getWidth, getHeight</li>
    <li>isColliding, getListOfCollidingBrothers, isCollidingABrother</li>
    <li>...</li>
</ul>
</p>
</p>
<br/>
<hr/>
<h2>How to extend the CGSGNode class ?</h2>

<p>
    cgSceneGraph is a OOP tool, so to inherit from CGSGNode, a class has to extend
    CGSGNode.<br/>
    This is done simply like this:

<div class="displayCode">
                                <pre class="brush: js;">
var CustomNode = CGSGNode.extend(
    {
        //constructor.
        // You can specify any parameters you need
        initialize:function (x, y, width, height) {
            //call the constructor of the parent class.
            // CGSGNode take 4 parameters : x, y, width, height
            this._super(x, y, width, height);

            /**
             * CGSGNode variable defining the type of the class
             * @property classType
             * @readonly
             * @type {String}
             */
            this.classType = "CustomNode";

            //define here every property you need
            this.color = "#ff0000";

            //...
        },

        /**
         * Custom rendering.
         * You must define this method and declare inside what is the rendering loop
         *  for this node.
         * Here we will just draw a square
         * @method render
         * @override
         * @protected
         * @param {CanvasRenderingContext2D} context the context into render the node
         * */
        render:function (context) {
            //save current state
            this.beforeRender(context);

            //apply the global alpha (ie the opacity), that is a CGSGNode property
            context.globalAlpha = this.globalAlpha;

            //draw this zone by using the custom property : this.color
            context.fillStyle = this.color;

            //we draw the rect at (0,0) because we have already translated the context
            // to the correct position
            context.fillRect(0, 0, this.dimension.width, this.dimension.height);

            //restore state
            this.afterRender(context);
        },

        /**
         * Return a copy of this node
         * @method copy
         * @override
         * @return {CGSGNodeSquare} a copy of this node
         */
        copy:function () {
            var node = new CustomNode(this.position.x, this.position.y,
                                      this.dimension.width, this.dimension.height);
            //call the super method
            node = this._super(node);

            node.color = this.color;
            return node;
        }
    }
);
                                </pre>
</div>
</p>

<br/>
<hr/>
<h2>How to use your extension</h2>

<p>
    Use your node as you use any node: by instanciating it :)<br/>

    Example:

<div class="displayCode">
                                <pre class="brush: js;">
        createScene : function () {
            //first, define an arbitrary node as root node
            var rootNode = new CGSGNode(0, 0, 0, 0);
            this.sceneGraph.addNode(rootNode, null);

			//X, Y, WIDTH, HEIGHT
			var square = new CustomNode(20, 20, 150, 150);

            //you can use CGSGNode properties
			square.isDraggable = true;
			square.isResizable = true;
			square.globalAlpha = 0.8;

            //custom your node
			square.color = "lightgray";

            //add your square as child of the root node
			rootNode.addChild(square);

            //instanciate a second CustomNode
			var square2 = new CustomNode(200, 200, 20, 35);
            rootNode.addChild(square2);
		}
                                </pre>
</div>
</p>


<br/>
<hr/>
<h2>Advanced option : the picknode mode "ghost"</h2>

<p>
    What is the "ghost mode" ???<br/>
    Well, I have to start to explain that the framework has 2 ways to detect a node under a position (like the mouse
    cursor when the user click on a node) :
    "<strong class="blueText">Region mode</strong>" and "<strong class="blueText">ghost mode</strong>". You can switch from one to other with :

<div class="displayCode">
                                <pre class="brush: js;">
                                    myNode.pickNodeMethod = CGSGPickNodeMethod.REGION;
                                    //or
                                    myNode.pickNodeMethod = CGSGPickNodeMethod.GHOST;
                                    </pre>
</div>
<br/>
<ul>
    <li><strong class="blueText">The region mode</strong>: the framework will check if the position to check is inside
        the box around the node (called "bounding box").<br/>
        This method is not very accurate (in the case of a circle, it will validate a point outside the circle, but
        inside the bounding box), but is very fast.<br/>So it's the default method.<br/>
        Example:
        <img class="imgCenter" src="../img/boundingbox.png" alt="bounding box principle"/>
    </li>
</ul>

<ul>
    <li><strong class="blueText">The ghost mode</strong>: If you need very accurate detection, you can use the ghost
        mode.<br/>
        The difference is that the framework will render the node in full red color inside a temporary and in-memory white
        canvas.
        Then it will check if the pixel under the position is white or red. As easy :)<br/>
        However, this method is really slower than the region mode and needs that the node define how to render it in
        the ghost canvas.<br/>
        That is done inside the custom class:

        <div class="displayCode">
                                <pre class="brush: js;">
        /**
        * @method renderGhost
        * @param {CanvasRenderingContext2D} ghostContext the context into render the node
        */
        renderGhost : function (ghostContext) {
            //save current state
            this.beforeRenderGhost(ghostContext);

            //render the node here by using the ghost color
            ghostContext.fillStyle = cgsgGhostColor;

            //do the render here
            ...

            // for fast optimization, it could be a good idea to render squares that roughly represent the node.
            // Sometimes it's faster to just render 3 or 4 squares than render complex bezier curves,
            // for "approximatively" the same result detection result.
            // For example, if your node represent a tree, you can render here a big square for the leaves and a vertical
            //square for the trunk of the tree. It will be 20 times faster for almost the same accurate of detection.

            //restore state
            this.afterRenderGhost(ghostContext);
        }
                                    </pre>
        </div>

    </li>
</ul>

</p>

</div>
<div class="clear" style="height:4px"></div>
</div>
<!-- end content -->
</div>
<!-- end container -->
</div>

<div id="pageFooter">
</div>
</div>
</div>
<!-- end wrapper -->
<div class="footerShadow"></div>

<div id="footerWrapper">
    <div id="footerBanner">
        <div class="footerBlock alignleft">
            <h2>WHAT'S UP?</h2>
            <hr/>
            <h4>cgSceneGraph v1.4.1</h4>
            New Nodes, even faster, more interactions, ... <span class="blueText">cgSceneGraph v1.4.1</span> is released
            :)<br/>
            Please, send us your feedback and requests on <a href="https://github.com/GwennaelBuchet/cgSceneGraph"
                                                             target="_blank">GitHub</a>
        </div>

        <div class="footerBlock alignright logoCap">
            <h2>CONTACT</h2>

            <p>
                mail to: <a href="mailto:gwennael.buchet@capgemini.com" title="gwennael.buchet@capgemini.com">gwennael.buchet@capgemini.com</a><br/>

            <p/>
        </div>

        <div class="clear" style="height:4px"></div>
    </div>
</div>


<script type="text/javascript" src="../js/jquery-1.8.2.min.js"></script>
<script type="text/javascript">
    $(function () {
        var $oe_menu = $('#oe_menu');
        var $oe_menu_items = $oe_menu.children('li');

        $oe_menu_items.bind('mouseenter',function () {
            var $this = $(this);
            $this.addClass('slided selected');
            $this.children('div').css('z-index', '9999').stop(true, true).slideDown(200, function () {
                $oe_menu_items.not('.slided').children('div').hide();
                $this.removeClass('slided');
            });
        }).bind('mouseleave', function () {
                    var $this = $(this);
                    $this.removeClass('selected').children('div').css('z-index', '1');
                    $oe_menu_items.children('div').hide();
                });

        $oe_menu.bind('mouseenter',function () {
            var $this = $(this);
        }).bind('mouseleave', function () {
                    var $this = $(this);
                    $this.removeClass('hovered');
                    $oe_menu_items.children('div').hide();
                })
    });
</script>
<script type="text/javascript">
    SyntaxHighlighter.all()
</script>
</body>
</html>
